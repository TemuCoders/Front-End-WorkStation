<h2 mat-dialog-title>{{ 'review.update' | translate }}</h2>

<form [formGroup]="form" (ngSubmit)="submit()">
  <mat-dialog-content>
    <div class="rating-section">
      <label>{{ 'review.rating' | translate }}:</label>
      <mat-button-toggle-group
        formControlName="rating"
        name="rating"
        aria-label="Rating"
        appearance="legacy">
        @for (r of [1,2,3,4,5]; track r) {
          <mat-button-toggle [value]="r">
            {{ r }} â˜…
          </mat-button-toggle>
        }
      </mat-button-toggle-group>
    </div>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>{{ 'review.comment' | translate }}</mat-label>
      <textarea
        matInput
        formControlName="comment"
        rows="4"
        [placeholder]="'review.writeComment' | translate">
      </textarea>
      @if (form.get('comment')?.hasError('required')) {
        <mat-error>
          {{ 'review.comment' | translate }} is required
        </mat-error>
      }
      @if (form.get('comment')?.hasError('minlength')) {
        <mat-error>
          Minimum 3 characters
        </mat-error>
      }
    </mat-form-field>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="close()">
      {{ 'common.cancel' | translate }}
    </button>
    <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
      {{ 'common.save' | translate }}
    </button>
  </mat-dialog-actions>
</form>
