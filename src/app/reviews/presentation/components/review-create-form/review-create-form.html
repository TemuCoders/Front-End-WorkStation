<mat-card appearance="outlined" class="form-card">
  <mat-card-header>
    <mat-card-title>{{ 'review.yourRating' | translate }}</mat-card-title>
  </mat-card-header>

  <form [formGroup]="form" (ngSubmit)="submit()">
    <mat-card-content>
      <div class="rating-section">
        <label>{{ 'review.rating' | translate }}:</label>
        <mat-button-toggle-group
          formControlName="rating"
          name="rating"
          aria-label="Rating"
          appearance="legacy">
          @for (r of [1,2,3,4,5]; track r) {
            <mat-button-toggle [value]="r">
              {{ r }} â˜…
            </mat-button-toggle>
          }
        </mat-button-toggle-group>
      </div>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>{{ 'review.comment' | translate }}</mat-label>
        <textarea
          matInput
          formControlName="comment"
          rows="4"
          [placeholder]="'review.writeComment' | translate">
        </textarea>
        @if (form.get('comment')?.hasError('required')) {
          <mat-error>
            {{ 'review.comment' | translate }} is required
          </mat-error>
        }
        @if (form.get('comment')?.hasError('minlength')) {
          <mat-error>
            Minimum 3 characters
          </mat-error>
        }
        @if (form.get('comment')?.hasError('maxlength')) {
          <mat-error>
            Maximum 2000 characters
          </mat-error>
        }
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions align="end">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="form.invalid">
        {{ 'review.submit' | translate }}
      </button>
    </mat-card-actions>
  </form>
</mat-card>
