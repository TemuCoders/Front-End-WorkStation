@if (store.loading()) {
  <mat-spinner diameter="40"></mat-spinner>
}

@if (store.error()) {
  <mat-error>{{ store.error() }}</mat-error>
}

<div class="card-grid">
  @for (workspace of store.workspaces(); track workspace.id) {
    <mat-card class="workspace-card">

      <!-- Imagen destacada -->
      <img mat-card-image [src]="workspace.img || 'https://picsum.photos/seed/' + workspace.id + '/600/400'" alt="{{ workspace.name }}" class="workspace-image" />

      <!-- Contenido -->
      <mat-card-content>
        <div class="title-section">
          <h2>{{ workspace.name }}</h2>
          <span class="badge" [class.available]="workspace.available" [class.unavailable]="!workspace.available">
            {{ workspace.available ? ('workspaceTable.availability.yes' | translate) : ('workspaceTable.availability.no' | translate) }}
          </span>
        </div>

        <p class="subtitle">{{ workspace.spaceType }} • {{ workspace.capacity }} {{ 'workspaceTable.headers.capacity' | translate }}</p>

        <p class="description">{{ workspace.description }}</p>

        <div class="price-rating">
          <span class="price">S/ {{ workspace.price }} /día</span>
        </div>

        <p class="address">
          {{ workspace.address.street }} {{ workspace.address.number }},
          {{ workspace.address.city }}, {{ workspace.address.postalCode }}
        </p>

        <p class="services">
          <strong>{{ 'workspaceTable.headers.services' | translate }}:</strong>
          {{ getServicesNames(workspace) }}
        </p>
      </mat-card-content>

      <!-- Acción -->
      <mat-card-actions align="end">
        @if (workspace.available) {
          <button mat-raised-button color="primary" (click)="router.navigate(['searching/workspaces/reserve', workspace.id])">
            {{ 'workspace.reserve' | translate }}
          </button>
        }
      </mat-card-actions>
    </mat-card>
  }
</div>
