<div class="layout">
  <!-- Sidebar solo si hay usuario -->
  <app-sidebar *ngIf="currentUser() as user"></app-sidebar>

  <div class="booking-list-container">
    <h1>Mis Reservas</h1>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading">
      <p>Cargando tus reservas...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && bookings.length === 0" class="empty-state">
      <p>No tienes reservas aún</p>
      <a routerLink="/searching">Explorar espacios</a>
    </div>

    <!-- Bookings Grid -->
    <div *ngIf="!loading && bookings.length > 0" class="bookings-grid">
      <div *ngFor="let booking of bookings" class="booking-card">

        <!-- Imagen del workspace -->
        <div class="booking-image" *ngIf="booking.workspace">
          <img [src]="booking.image" alt="Imagen del workspace" />
        </div>

        <!-- Info del booking -->
        <div class="booking-info">
          <h2 class="ws-title">{{ booking.workspace?.name || 'Espacio no encontrado' }}</h2>
          <p class="ws-description">{{ booking.workspace?.description || 'No hay descripción disponible.' }}</p>

          <hr />

          <div class="dates" *ngIf="booking.workspace">
            <p><strong>Check-in:</strong> <span>{{ booking.startDate }}</span></p>
            <p><strong>Check-out:</strong> <span>{{ booking.endDate }}</span></p>
            <p><strong>Reservado:</strong> <span>{{ booking.bookingDate }}</span></p>
          </div>

          <hr />

          <p class="total-text">
            <strong>Total:</strong> S/ {{ booking.total }}
          </p>

          <div class="booking-id">
            <small>Booking ID: #{{ booking.bookingCode }}</small>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
